@using VocaDb.Web;
@using VocaDb.Web.Helpers;
@using VocaDb.Model.DataContracts.Albums;
@using PagedList.Mvc;
@using PagedList;
@{
    ViewBag.Title = "Albums";
}

<link href="@Url.Content("~/Content/PagedList.css")" rel="stylesheet" type="text/css" />

@using (Html.BeginForm()) {
	
<p>Filter: @Html.TextBox("filter") &nbsp; <input type="submit" value="Filter" /></p>

@Html.PagedListPager((IPagedList)ViewBag.Albums, page => Url.Action("Index", new { page, filter = ViewBag.Filter }))

<table>
	<tr>
		<th>Name</th>
	</tr>
@foreach (AlbumWithAdditionalNamesContract album in ViewBag.Albums) {
	<tr>
		<td>
			@Html.ActionLink(album.Name, "Details", new { id = album.Id }, new { title = album.AdditionalNames })<br />
			<span class="extraInfo">@album.ArtistString</span>
		</td>
		<td>
			@if (Login.CanManageDb) {
				@Html.ActionLink("Edit", "Edit", new { id = album.Id })
			}
		</td>
	</tr>
}
</table>

@Html.PagedListPager((IPagedList)ViewBag.Albums, page => Url.Action("Index", new { page, filter = ViewBag.Filter }))
}

@model VocaDb.Web.Models.ObjectCreate
@if (Login.CanManageDb) {
	using (Html.BeginForm("Create", "Album")) {
	
    <div>
        <fieldset>
            <div class="editor-label">
                Name:
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Name)
                @Html.ValidationMessageFor(m => m.Name)
            </div>			
			<input type="submit" value="Create" />
		</fieldset>
	</div>
}
}