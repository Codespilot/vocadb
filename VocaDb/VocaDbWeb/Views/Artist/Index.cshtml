@using VocaDb.Web.Helpers;
@using VocaDb.Model;
@using VocaDb.Web.Models;
@using VocaDb.Model.Domain.Artists;
@using VocaDb.Model.DataContracts.Artists;
@using PagedList.Mvc;
@using PagedList;
@model ArtistIndex
@{
	ViewBag.Title = @ViewRes.SharedStrings.Artists;
}

@section Toolbar {
@if (Login.CanManageDb) {
	@Html.ActionLink(ViewRes.Artist.IndexStrings.AddArtist, "Create", null, new { id = "createLink" })
}
}

<link href="@Url.Content("~/Content/PagedList.css")" rel="stylesheet" type="text/css" />

@if (Model.DraftsOnly) {
	@Helpers.NotificationPanel(Resources.CommonMessages.Drafts)
}

@using (Html.BeginForm("Index", "Artist")) {
	
<p>
	@ViewRes.SharedStrings.Filter: @Html.TextBoxFor(m => m.Filter, new { size = 30 }) 
	&nbsp; 
	@Html.DropDownListFor(a => a.ArtistType, new SelectList(Model.FilterableArtistTypes, "Key", "Value", Model.ArtistType))
	&nbsp;
	@Html.CheckBoxFor(m => m.DraftsOnly)
	@Html.LabelFor(m => m.DraftsOnly)
	<button type="submit">@ViewRes.SharedStrings.Apply</button>
</p>

if (Model.Artists.Any()) {
	
<p>@ViewRes.SharedStrings.EntriesFound: @Model.Artists.TotalItemCount</p>
	
@Html.PagedListPager(Model.Artists, page => Url.Action("Index", new { page, filter = Model.Filter, artistType = Model.ArtistType, draftsOnly = Model.DraftsOnly }))

<table>
	<tr>
		<th>@ViewRes.SharedStrings.Name</th>
		<th>@ViewRes.SharedStrings.Type</th>
		<th>@ViewRes.SharedStrings.Actions</th>
	</tr>
@foreach (var artist in Model.Artists) {
	<tr>
		<td>
			@Helpers.DraftIcon(artist.Status)
			@Html.ActionLink(artist.Name, "Details", new { id = artist.Id })<br />
			<span class="extraInfo">@artist.AdditionalNames</span>
		</td>
		<td>
			@Translate.ArtistTypeName(artist.ArtistType)
		</td>
		<td>
			@if (Login.CanEdit(artist)) {
				@Html.ActionLink(ViewRes.SharedStrings.Edit, "Edit", new { id = artist.Id })
   }
		</td>
	</tr>
}
</table>
	
@Html.PagedListPager(Model.Artists, page => Url.Action("Index", new { page, filter = Model.Filter, artistType = Model.ArtistType, draftsOnly = Model.DraftsOnly }))
}

if (!Model.Artists.Any()) {

	<p>@ViewRes.SharedStrings.NoResults</p>
	@Helpers.GoogleSiteSearch()

}
}


<script type="text/javascript">

	$(document).ready(function () {
		$("#createLink").button({ icons: { primary: 'ui-icon-plusthick'} });		
	});

</script>