@using VocaDb.Web.Helpers
@model VocaDb.Web.Models.MikuDbAlbums.Index
@{
	ViewBag.Title = "MikuDB albums";
}

<!--
<link rel="stylesheet" href="@Url.Content("~/Content/jquery.tooltip.css")" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery.tooltip.min.js")" type="text/javascript"></script>
-->

@section Toolbar {
@if (Login.Manager.HasPermission(VocaDb.Model.Domain.Security.PermissionToken.MikuDbImport)) {
	
@Html.ActionLink("Download new album info from MikuDB", "ImportNew", null, new { id = "importNewLink" })

}
}

@using (Html.BeginForm("ImportOne", "MikuDbAlbum")) {

	<p>Download one album from MikuDB: </p>
	@Html.TextBox("AlbumUrl", null, new { size = 30, maxlength = 255 })
	
	<button type="submit" class="btn">Download</button>
	
}

@using (Html.BeginForm("ImportFromFile", "MikuDbAlbum", FormMethod.Post, new { enctype = "multipart/form-data" })) {

	<p>Parse from CSV file: </p>
    <input type="file" name="albumCsv" />
	
	<button type="submit" class="btn">Parse</button>
	
}

	
@using (Html.BeginForm("Index", "MikuDbAlbum")) {
	
<p>
	Status:
	@Html.DropDownListFor(m => m.Status, new SelectList(Model.AllStatuses))
	&nbsp;
	<button type="submit" class="btn">Apply</button>
</p>

}

@using (Html.BeginForm("PrepareForImport", "MikuDbAlbum")) {
	
	<button type="submit" class="btn">Import selected</button>
		
	<table>
		<tr>
			<th>Title</th>
			<th>Info</th>
			<th>Tracks</th>
		</tr>
		@foreach (var album in Model.Albums) {
			Html.RenderPartial("MikuDbAlbumRow", album);
		}
	</table>
	
}

<script type="text/javascript">

	$(document).ready(function () {
		$("#importNewLink").button({ icons: { primary: 'ui-icon-arrowthickstop-1-s'} });
	});

</script>