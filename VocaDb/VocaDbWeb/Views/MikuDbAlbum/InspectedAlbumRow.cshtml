@using VocaDb.Web.Helpers
@model VocaDb.Model.DataContracts.MikuDb.InspectedAlbum

@using (Html.BeginCollectionItem("albums")) {

<div>
	<h3><a href="@Model.ImportedAlbum.SourceUrl">@Model.ImportedAlbum.Title</a></h3>
	@Html.HiddenFor(m => m.ImportedAlbum.Id)
	<table>
		<tr>
			<td>
				<img src="@Url.Action("CoverPicture", new { id = Model.ImportedAlbum.Id })" alt="Cover picture" class="coverPic" />			
				<p>
					Existing album:<br /> 
					@Html.DropDownListFor(m => m.MergedAlbumId, new SelectList(Model.ExistingAlbums, "Id", "Name", Model.MergedAlbumId))
					<button type="submit" name="commit" value="No">Update</button>
					<br />
					@if (Model.MergedAlbum != null) { 
						<span>@Html.ActionLink(Model.MergedAlbum.Name, "Details", "Album", new { id = Model.MergedAlbum.Id }, new { title = Model.MergedAlbum.AdditionalNames })</span> 
					} else {
						<span>(no match)</span>
					}
				</p>
				@if (Model.ImportedAlbum.Data.ReleaseYear != null) {
					<p>Release year: @Model.ImportedAlbum.Data.ReleaseYear</p>
				}			
			</td>
			<td>
				<p>
					Language for names:
                    @Html.LanguageSelectionDropDownListFor(m => m.SelectedLanguage, null, true)
				</p>
				<h4>Artists</h4>
				<ul>
				@foreach (var artist in Model.Artists) {
					<li>
						@artist.Name: 
						@if (artist.ExistingArtist != null) {
							<span>@Html.ActionLink(artist.ExistingArtist.Name, "Details", "Artist", new { id = artist.ExistingArtist.Id }, new { title = artist.ExistingArtist.AdditionalNames })</span>
						} else {
							<span>(no match)</span>
						}
					</li>
				}
				</ul>

				<h4>Tracks</h4>
                @Html.CheckBoxFor(m => m.MergeTracks)
                Merge tracks

				@if (Model.Tracks != null) {
				<div class="tracklist">
					<ul>
					@foreach (var track in Model.Tracks) {
						<li>
							@{ Html.RenderPartial("InspectedAlbumTrack", track); }
						</li>
					}				
					</ul>
				</div>
				} else {
					<p>No tracks will be imported.</p>
				}
			</td>
		</tr>
	</table>
</div>

}