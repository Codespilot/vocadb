
<div data-bind="visible: showAlbumSearch, with: albumSearchViewModel, css: { loading: albumSearchViewModel.loading }">

	@{ Html.RenderPartial("Partials/_EntryCountBox"); }

	<div data-bind="with: paging">
		@KnockoutHelpers.ServerSidePaging()
	</div>
	
	<!-- ko if: viewMode() == 'Details' -->
	<table class="table table-striped">
		<thead>
			<tr>
				<th colspan="2">
					<a data-bind="click: function() { sort('Name') }" href="#">
						Name
						<span class="sortDirection_down" data-bind="visible: sort() == 'Name'"></span>
					</a>
				</th>
				<th>
					<a data-bind="click:function() { sort('ReleaseDate') }" href="#">
						Release date
						<span class="sortDirection_down" data-bind="visible: sort() == 'ReleaseDate'"></span>
					</a>
				</th>
				<th>
					<a data-bind="click: function() { sort('RatingAverage') }" href="#">
						Rating
						<span class="sortDirection_down" data-bind="visible: sort() == 'RatingAverage'"></span>
					</a>
				</th>
			</tr>
		</thead>
		<tbody data-bind="foreach: page">
			<tr>
				<td>
					<a data-bind="visible: $data.mainPicture, attr: { href: vdb.utils.EntryUrlMapper.details('Album', id), title: $data.additionalNames }" href="#" class="coverPicThumb">
						<img data-bind="attr: { src: ($data.mainPicture ? mainPicture.urlTinyThumb : '') }" title="Cover picture" class="coverPicThumb" />
					</a>
				</td>
				<td>
					<a data-bind="text: $data.localizedName || $data.defaultName, attr: { href: vdb.utils.EntryUrlMapper.details('Album', id), title: $data.additionalNames }" href="#"></a><br />
					<small class="extraInfo" data-bind="text: artistString"></small><br />
					<small class="extraInfo" data-bind="text: $parent.searchViewModel.resources().discTypeNames[discType]"></small>
				</td>
				<td>
					<span data-bind="text: releaseDate ? releaseDate.formatted : ''"></span>
					<span data-bind="visible: $data.releaseEvent">
						<br />
						<a data-bind="text: $data.releaseEvent, attr: { href: '/Event/Find?query=' + encodeURIComponent($data.releaseEvent) }" href="#"></a>
					</span>
				</td>
				<td>
					<span data-bind="attr: { title: ratingAverage }, foreach: $parent.ratingStars($data)">
						<img data-bind="attr: { src: enabled ? '/Content/star.png' : '/Content/star_disabled.png' }" />
					</span>
					<br />
					<span data-bind="text: ratingCount"></span>
					time(s)
				</td>
			</tr>
		</tbody>
	</table>
	<!-- /ko -->

	<!-- ko if: viewMode() == 'Tiles' -->
	<ul class="smallThumbs" data-bind="foreach: page">
		<li>
			<a data-bind="attr: { href: vdb.utils.EntryUrlMapper.details('Album', id), title: $data.additionalNames }" href="#">
				<div class="pictureFrame">
					<img data-bind="attr: { src: ($data.mainPicture ? mainPicture.urlSmallThumb : '') }, albumToolTip: id" alt="Preview" class="coverPic" />
				</div>
			</a>
			<p data-bind="text: $data.localizedName || defaultName"></p>
		</li>
	</ul>
	<!-- /ko -->
		
	<div data-bind="with: paging">
		@KnockoutHelpers.ServerSidePaging()
	</div>

</div>

