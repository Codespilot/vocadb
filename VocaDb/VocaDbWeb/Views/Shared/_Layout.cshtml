@using VocaDb.Web.Helpers
@using VocaDb.Model.Domain.Security

@* ReSharper disable ConditionIsAlwaysTrueOrFalse *@
@{
	var displaySocialLinks = (ViewBag.DisplaySocialLinks == true);
	
}
@* ReSharper restore ConditionIsAlwaysTrueOrFalse *@

<!DOCTYPE html>
<html>
<head>
    <title>Vocaloid Database@(!string.IsNullOrEmpty(ViewBag.Title) ? " - " + ViewBag.Title : "")</title>
	<meta name="description" content="Vocaloid database with translated artists, albums and songs." />	
	<meta name="keywords" content="Vocaloid, VocaDB, Vocaloid database, Hatsune Miku" />

	<link rel="shortcut icon" href="@Url.Content("~/Content/favicon.ico")" type="image/x-icon" />
    <link href="@Url.Content("~/Content/bootstrap.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Styles/Icons.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
	<link rel="search" type="application/opensearchdescription+xml" title="VocaDB albums" href="/albumsearch.xml" />

    <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ui/minified/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/VocaDb.js")" type="text/javascript"></script>
	<script src="/Scripts/MicrosoftAjax.js" type="text/javascript"></script>
	<script src="/Scripts/MicrosoftMvcAjax.js" type="text/javascript"></script>
	<!--<script src="http://cdn.jquerytools.org/1.2.6/jquery.tools.min.js" type="text/javascript"></script>-->
	
	@if (displaySocialLinks) {
		<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
	}
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-26327627-1']);
			_gaq.push(['_setDomainName', 'vocadb.net']);
			_gaq.push(['_trackPageview']);

			(function () {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
</head>

	<body style="padding-top: 40px">
		
		@if (displaySocialLinks) {
			<div id="fb-root"></div>
			<script>	(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
			fjs.parentNode.insertBefore(js, fjs);
			} (document, 'script', 'facebook-jssdk'));</script>		
  }
  
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<div class="brand">@Html.ActionLink("VocaDB", "Index", "Home")</div>
				<ul class="nav">
					<li>@Html.ActionLink(ViewRes.SharedStrings.Artists, "Index", "Artist")</li>				
					<li>@Html.ActionLink(ViewRes.SharedStrings.Albums, "Index", "Album")</li>				
					<li>@Html.ActionLink(ViewRes.SharedStrings.Songs, "Index", "Song")</li>				
					<li>@Html.ActionLink(ViewRes.SharedStrings.Tags, "Index", "Tag")</li>
				</ul>
				@{ Html.RenderPartial("GlobalSearchBox", new VocaDb.Web.Models.GlobalSearchBoxModel(Html.GlobalSearchObjectType(), Html.GlobalSearchTerm())); }
			</div>
		</div>
	</div>

		<table>
			<tr>
				<td class="menu">
					<a href="@Url.Action("Index", "Home")">
						<img src="@Url.Content("~/Content/vocadb-title.png")" alt="VocaDB" title="VocaDB" />
					</a>
					<ul>
						<li>@Html.ActionLink(ViewRes._LayoutStrings.Home, "Index", "Home")</li>
						<li>
							@Html.ActionLink(ViewRes.SharedStrings.Artists, "Index", "Artist")
							<ul>
								@if (Login.CanManageDb) {
									<li>@Html.ActionLink(ViewRes._LayoutStrings.AddArtist, "Create", "Artist")</li>
		}
								<li>@Html.ActionLink(ViewRes.SharedStrings.Drafts, "Index", "Artist", new { draftsOnly = true }, null)</li>
							</ul>
						</li>
						<li>
							@Html.ActionLink(ViewRes.SharedStrings.Albums, "Index", "Album")
							<ul>
								@if (Login.CanManageDb) {
									<li>@Html.ActionLink(ViewRes._LayoutStrings.AddAlbum, "Create", "Album")</li>
		}
								<li>@Html.ActionLink(ViewRes.SharedStrings.Drafts, "Index", "Album", new { draftsOnly = true }, null)</li>
								<li>@Html.ActionLink(ViewRes.SharedStrings.TopRatedAlbums, "TopRated", "Album")</li>
								<li>@Html.ActionLink(ViewRes.SharedStrings.ReleaseEvents, "EventsBySeries", "Event")</li>
							</ul>
						</li>
						<li>
							@Html.ActionLink(ViewRes.SharedStrings.Songs, "Index", "Song")
							<ul>
								@if (Login.CanManageDb) {
									<li>@Html.ActionLink(ViewRes._LayoutStrings.AddSong, "Create", "Song")</li>
		}
								<li>@Html.ActionLink(ViewRes.SharedStrings.Drafts, "Index", "Song", new { draftsOnly = true }, null)</li>
								<li>@Html.ActionLink(ViewRes.SharedStrings.TopFavoritedSongs, "TopFavorited", "Song")</li>
							</ul>
						</li>
						<li>@Html.ActionLink(ViewRes.SharedStrings.FeaturedSongLists, "Featured", "SongList")</li>
						<li>@Html.ActionLink(ViewRes.SharedStrings.Tags, "Index", "Tag")</li>
						<li>@Html.ActionLink(ViewRes._LayoutStrings.Help, "Index", "Help")</li>
						@if (Login.Manager.HasPermission(PermissionToken.MikuDbImport)) {
							<li>@Html.ActionLink(ViewRes._LayoutStrings.MikuDbAlbum, "Index", "MikuDbAlbum")</li>		 
	  }
						@if (Login.CanAccessManageMenu) {
							<li>@Html.ActionLink(ViewRes._LayoutStrings.Manage, "Index", "Admin")</li>
	  }
						@if (!Login.Manager.IsLoggedIn) {
							<li>@Html.ActionLink(ViewRes._LayoutStrings.LogIn, "Login", "User")</li>
							<li>@Html.ActionLink(ViewRes._LayoutStrings.Register, "Create", "User")</li>
	  } else {
							<li>@Html.ActionLink(ViewRes._LayoutStrings.LogOut, "Logout", "User")</li>
	  }
					</ul>
					@if (Login.Manager.IsLoggedIn) {
						<p class="user">@ViewRes._LayoutStrings.Welcome @Html.ActionLink(Login.User.Name, "Profile", "User", new { id = Login.User.Name }, null)</p>
	 }
				
					<br />
					<h3>@ViewRes._LayoutStrings.Services</h3>
					<ul>
						<li><a href="irc://irc.rizon.net/mikuchan">IRC channel on Rizon</a></li>
					</ul>

					<h3>@ViewRes._LayoutStrings.RelatedSites</h3>
					<ul>
						<li><a href="http://mikudb.com">MikuDB</a></li>
						<li><a href="http://vocaloidism.com">Vocaloidism</a></li>
						<li><a href="http://vocaloidia.com">VocaloidIA</a></li>
						<li><a href="http://vocaloidotaku.net">VocaloidOtaku</a></li>
						<li><a href="http://mikuzen.blogspot.com">Miku;Zen</a></li>
					</ul>
					
					<br />
					@if (displaySocialLinks) {
						<h3>@ViewRes._LayoutStrings.SocialSites</h3>
		 		 
						<div class="fb-like" data-href="https://www.facebook.com/vocadb" data-send="true" data-layout="button_count" data-width="200" data-show-faces="true"></div>
						<br /><br />
						<g:plusone href="https://plus.google.com/112203842561345720098"></g:plusone>
						<br /><br />
						<a href="https://twitter.com/VocaDB" class="twitter-follow-button" data-show-count="false" data-lang="@UICulture">@ViewRes._LayoutStrings.FollowUser @@VocaDB</a>
						<script>	!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script>
		 
	 }
				</td>
				<td class="rightFrame">

					@if (ViewBag.Parents != null) {
						foreach (MvcHtmlString link in ViewBag.Parents) {
							<span>
								@link &gt;&gt;
							</span>
						}
					}
					<h2 class="pageTitle">@ViewBag.Title</h2>
					@if (!string.IsNullOrEmpty(ViewBag.Subtitle)) {
						<span class="pageSubtitle">@ViewBag.Subtitle</span>
					}

					@if (IsSectionDefined("Toolbar")) {
						<p>
							@RenderSection("Toolbar")
						</p>
					}
				
					@if (Login.Manager.IsLoggedIn && Login.Manager.LoggedUser.HasUnreadMessages) {
						<div class="ui-widget">
							<div class="ui-state-highlight ui-corner-all" style="padding: 0 .7em;">
								<p>
									@Helpers.NotificationIcon()
									<span>@Html.ActionLink("You have unread messages", "Messages", "User")</span>
								</p>
							</div>
						</div>
					}
				
					@if (TempData.StatusMessage() != null) {
						@Helpers.NotificationPanel(TempData.StatusMessage())
					}
		
					@RenderBody()
				</td>
			</tr>
		</table>  

		<script src="@Url.Content("~/Scripts/Shared/NamesList.js")" type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/Shared/WebLinksList.js")" type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/Shared/GlobalSearchBox.js")" type="text/javascript"></script>
		@if (IsSectionDefined("BodyScripts")) {
			@RenderSection("BodyScripts")
  }
	</body>
</html>
