@model VocaDb.Web.Models.Song.Create

@{
    ViewBag.Title = "Submit a new song";
	ViewBag.Parents = new[] { 
		Html.ActionLink("Songs", "Index")
	};	
}

@using (Html.BeginForm("Create", "Song", FormMethod.Post)) {

	@Helpers.ValidationSymmaryPanel("Unable to create song. Correct the errors and try again.");
	
	@Helpers.NotificationPanel("Please make sure the song you're about to submit hasn't been added before. You need to enter at least one name and artist. Link to the original PV is very desirable.")
																							
	<div>
		<fieldset>
			<table><tr>
			<td>
				Name:<br />
				(need at least one)
			</td>
			<td><div class="editor-label">
				@Html.LabelFor(m => m.NameOriginal)
			</div>
			<div class="editor-field">
				@Html.TextBoxFor(m => m.NameOriginal, new { id = "nameOriginal" })<br />
				@Html.ValidationMessageFor(m => m.NameOriginal)
			</div>
			</td><td>

			<div class="editor-label">
				@Html.LabelFor(m => m.NameRomaji)
			</div>
			<div class="editor-field">
				@Html.TextBoxFor(m => m.NameRomaji, new { id = "nameRomaji" })<br />
				@Html.ValidationMessageFor(m => m.NameRomaji)
			</div>
			</td><td>

			<div class="editor-label">
				@Html.LabelFor(m => m.NameEnglish)
			</div>
			<div class="editor-field">
				@Html.TextBoxFor(m => m.NameEnglish, new { id = "nameEnglish" })<br />
				@Html.ValidationMessageFor(m => m.NameEnglish)
			</div>
			</td></tr>
			</table>

			<div id="duplicateSongWarning" style="display:none">
				@Helpers.NotificationPanel(string.Empty, "duplicateSongMessage")
			</div>

			<div class="editor-label">
				@Html.LabelFor(m => m.PVUrl)
			</div>
			<div class="editor-field">
				@Html.TextBoxFor(m => m.PVUrl, new { size = 30 })<br />
				@Html.ValidationMessageFor(m => m.PVUrl)
			</div>

			<div class="editor-label">
				@Html.LabelFor(m => m.ReprintPVUrl)
			</div>
			<div class="editor-field">
				@Html.TextBoxFor(m => m.ReprintPVUrl, new { size = 30 })<br />
				@Html.ValidationMessageFor(m => m.ReprintPVUrl)
			</div>

			<div class="editor-label">
				Artists (need at least 1)
			</div>
			<div class="editor-field">
				@Html.ValidationMessage("Artists")
				<table>
				@if (Model != null && Model.Artists != null) {
					foreach (var artist in Model.Artists) {
						Html.RenderPartial("ArtistForSongRow", artist);
					}
				}
				@{ Html.RenderPartial("AddNewLinkRow", new VocaDb.Web.Models.AddNewLinkRowModel { EntityName = "artist", Prefix = "artist" }); }
				</table>
			</div>

		</fieldset>

		<input type="submit" value="Save" />

	</div>
	
}

<script type="text/javascript" src="@Url.Content("~/Scripts/Song/Create.js")"></script>
<script type="text/javascript">

	$(document).ready(function () {
		initPage()
	});

</script>