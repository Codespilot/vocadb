@using VocaDb.Web.Helpers;
@model VocaDb.Web.Models.Song.Create

@{
    ViewBag.Title = "Submit a new song";
	ViewBag.Parents = new[] { 
		Html.ActionLink("Songs", "Index")
	};	
}

@using (Html.BeginForm("Create", "Song", FormMethod.Post)) {

	@Helpers.ValidationSymmaryPanel("Unable to create song. Correct the errors and try again.");
	
	@Helpers.NotificationPanel("Please make sure the song you're about to submit hasn't been added before. You need to enter at least one name and artist. Link to the original PV is very desirable.")
																							
	<div>
		<fieldset>
			<table><tr><td class="alignTop">

				<div class="editor-label">
					Name (need at least one)
				</div>

				<div class="editor-field">
					@Html.ValidationMessage("Names")

					<table><tr><td>				
					@Html.LabelFor(m => m.NameOriginal)
					</td><td>
					@Html.TextBoxFor(m => m.NameOriginal, new { id = "nameOriginal", @class = "nameField", maxlength = 255, size = 40 })<br />
					@Html.ValidationMessageFor(m => m.NameOriginal)
					</td></tr>

					<tr><td>
					@Html.LabelFor(m => m.NameRomaji)
					</td><td>
					@Html.TextBoxFor(m => m.NameRomaji, new { id = "nameRomaji", @class = "nameField", maxlength = 255, size = 40 })<br />
					@Html.ValidationMessageFor(m => m.NameRomaji)
					</td></tr>
					
					<tr><td>
					@Html.LabelFor(m => m.NameEnglish)
					</td><td>
					@Html.TextBoxFor(m => m.NameEnglish, new { id = "nameEnglish", @class = "nameField", maxlength = 255, size = 40 })<br />
					@Html.ValidationMessageFor(m => m.NameEnglish)
					</td></tr></table>
				</div>

				<div id="duplicateSongWarning" style="display:none">
				</div>

				<div class="editor-label">
					@Html.LabelFor(m => m.SongType)
				</div>
				<div class="editor-field">
					@Html.SongTypeDropDownListFor(m => m.SongType)
				</div>

				<div class="editor-label">
					@Html.LabelFor(m => m.PVUrl)
				</div>
				<div class="editor-field">
					@Html.TextBoxFor(m => m.PVUrl, new { size = 30 })<br />
					@Html.ValidationMessageFor(m => m.PVUrl)
				</div>

				<div class="editor-label">
					@Html.LabelFor(m => m.ReprintPVUrl)
				</div>
				<div class="editor-field">
					@Html.TextBoxFor(m => m.ReprintPVUrl, new { size = 30 })<br />
					@Html.ValidationMessageFor(m => m.ReprintPVUrl)
				</div>

				<div class="editor-label">
					Artists (need at least 1)
				</div>
				<div class="editor-field">
					@Html.ValidationMessage("Artists")
					<table>
						<tbody id="artistsTableBody">
						@if (Model != null && Model.Artists != null) {
							foreach (var artist in Model.Artists) {
								Html.RenderPartial("ArtistContractRow", artist);
							}
						}
						</tbody>
					</table>
					<br />
					@Helpers.EntrySearchBox("artistAdd", false)
					<br />
					<input type="button" id="artistAddAcceptBtn" value="Add" />
				</div>

				<p>
					@Html.CheckBoxFor(m => m.Draft)
					@Html.LabelFor(m => m.Draft)
				</p>

			</td><td class="alignTop" style="max-width: 250px">
				@using (Html.BeginPanel()) {
					<p>@Resources.CommonMessages.NoArtistsToName</p>
					<p>@Resources.CommonMessages.NameHelp</p>
				}
			</td></tr></table>

		</fieldset>

		<input type="submit" value="Save" />

	</div>
	
}

<link rel="stylesheet" href="@Url.Content("~/Scripts/jqwidgets/styles/jqx.base.css")" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxcore.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxbuttons.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxscrollbar.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jqwidgets/jqxlistbox.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/Shared/EntrySearchJqx.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/Song/Create.js")"></script>
<script type="text/javascript">

	$(document).ready(function () {
		initPage()
	});

</script>